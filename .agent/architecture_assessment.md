# 면접 시스템 아키텍처 진단 및 제안

사용자분의 우려대로 현재 구현된 면접 시스템은 **"불필요하게 복잡하고(Over-engineered)", "깨지기 쉬운(Fragile)"** 상태입니다. 테스트 없이 급하게 연동되면서 **프론트엔드와 백엔드의 역할 경계가 무너진 것**이 가장 큰 문제입니다.

## 🚨 주요 문제점 진단

### 1. 프론트엔드에 비즈니스 로직이 노출됨 (심각)

- **점수 계산을 클라이언트가 수행**: `handleCompleteInterview`에서 프론트엔드 자바스크립트가 점수를 계산하고 합격 여부를 판단하여 DB에 저장 요청을 보냅니다.
  - -> **위험**: 사용자가 코드를 조작하여 "합격" 결과를 서버로 보낼 수 있습니다.
- **데이터 파싱의 복잡성**: 이력서의 JSON 데이터를 프론트엔드에서 `JSON.parse`로 일일이 변환하고 가공하고 있습니다. 이는 백엔드 DTO에서 처리되어야 할 일입니다.

### 2. 백엔드의 불필요한 복잡성 (Over-engineering)

- **AOP(관점 지향 프로그래밍) 오남용**: `InterviewContextAspect`를 사용하여 이력서 정보를 `ThreadLocal`에 숨겨서 전달하고 있습니다.
  - -> **문제**: 단순한 CRUD 서비스에서 데이터 흐름을 추적하기 어렵게 만들고, 테스트를 불가능하게 만드는 주범입니다. 그냥 `startInterview(Long resumeId)` 메소드 안에서 조회하면 될 일을 복잡하게 만들었습니다.
- **빈약한 도메인 설계**: `startInterview` 메소드가 너무 많은 일을 하고 있습니다 (유효성 검사, 세션 생성, AI 통신, 초기 메시지 저장 등).

### 3. "데이터 핑퐁"의 비효율성

- 프론트엔드가 백엔드로부터 받은 데이터를 그대로 다시 백엔드로 던져주는(`payloadContext`) 구조입니다. 백엔드가 세션(DB)에 상태를 저장하고 있다면, 프론트엔드는 "내 답변"만 보내면 되어야 합니다.

---

## 📚 연구 논문 분석 (Interview Xpert & Conversate)

이전 에이전트가 AOP를 도입한 배경에는 사용자님이 언급하신 두 논문의 핵심 철학이 담겨있음을 확인했습니다.

### 1. **Interview Xpert** (Resume-JD Context)

- **철학**: 면접 질문은 이력서와 공고(JD)라는 **강력한 맥락** 안에서 생성되어야 한다.
- **V2.0 대응**: AOP로 몰래 데이터를 주입하는 대신, `InterviewSession` DB 엔티티에 이력서 정보를 명확히 바인딩하고, 서비스 메소드에서 이를 명시적으로 참조하여 AI에게 전달합니다. (데이터 흐름의 가시성 확보)

### 2. **Conversate** (Dialogic Feedback & Reflective Learning)

- **철학**: 단순 질의응답이 아닌, 사용자의 답변을 반추(Reflect)하게 하는 **대화형 피드백**이 중요하다.
- **V2.0 대응**: 복잡한 코드 훅(Hook) 대신, **LLM 시스템 프롬프트**를 고도화합니다. AI에게 "사용자의 답변이 부족하면 다음 질문으로 넘어가지 말고, STAR 기법을 활용해 반추할 수 있는 꼬리 질문을 던져라"라는 페르소나를 명확히 부여합니다.

---

## 💡 최종 결론: "철학은 계승하고, 기술은 단순화한다"

이전 코드가 논문의 **'기능'**을 구현하기 위해 과하게 복잡한 **'기술(AOP)'**을 썼다면, V2.0은 논문의 **'목표(심층 면접과 피드백)'**를 가장 직관적이고 견고한 코드로 구현하는 것을 지향합니다.

**AOP를 제거해도 논문에서 강조하는 '맥락 중심 면접'과 '대화형 피드백'은 더 정확하고 제어 가능한 방식으로 유지됩니다.**
